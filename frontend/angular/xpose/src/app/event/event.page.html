<ion-header [translucent]="true">
  <ion-toolbar class="custom-toolbar" style="display: flex; justify-content: center;">
    <ion-buttons slot="end">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-buttons slot="start">
      <app-backbutton></app-backbutton>
    </ion-buttons>
    <ion-title class="event-title">Event</ion-title>

    <!-- <ion-buttons slot="end"> -->
      <!-- <ion-button (click)="onLogoutClick()">
        <ion-icon name="log-out-outline"></ion-icon>
      </ion-button> -->
    <!-- </ion-buttons> -->

    <!-- Search button -->
    <ion-buttons slot="end">
      <ion-button (click)="onSearchClick()">
        <ion-icon name="search-outline"></ion-icon>
      </ion-button>
    </ion-buttons>

  </ion-toolbar>
</ion-header>

    
    
<ion-menu side="end" content-id="main-content">
  <ion-header>
    <ion-toolbar>
      <ion-title>Menu</ion-title>
    </ion-toolbar>
  </ion-header>
  <ion-content>
    <ion-list>
      <ion-item>Edit event</ion-item>
      <ion-item>Leave event</ion-item>
      <ion-item>Delete event</ion-item>
    </ion-list>
  </ion-content>
</ion-menu>  

      <ion-content [fullscreen]="true" id="main-content" class="custom-backround">
      <app-loading-icon *ngIf="loading"></app-loading-icon>

    
      <ion-segment [(ngModel)]="filterType"  (ionChange)="applyFilter()">
        <ion-segment-button value="posts" id="posts_tab">
          Posts
        </ion-segment-button>
        <ion-segment-button value="message-board">
          Comments
        </ion-segment-button>
        <ion-segment-button  value="details">
          Details
        </ion-segment-button>
      </ion-segment>
    
    
      <ion-list *ngIf="filterType === 'posts'" >
        <!-- Display the gallery images -->
        <app-gallery-lightbox [galleryData]="data"></app-gallery-lightbox>
        
      </ion-list>
      
    
      <ion-list *ngIf="filterType === 'message-board'" >
        <ion-item class="comment-input">
          <ion-input [(ngModel)]="newMessage" placeholder="Type your comment"></ion-input>
          <ion-button (click)="createMessage()">Send</ion-button>
        </ion-item>
        
        <ion-list class="now">
          <ion-item class="comment-item" *ngFor="let message of messages">
            <ion-avatar slot="start">
              <!-- <img src="{{ message.avatar }}" alt="User Avatar"> -->
              <!-- <ion-img [src]="generateAvatar(message.displayName)"></ion-img> -->
              <ion-img [src]="generateAvatar(message.displayName)"></ion-img>
            </ion-avatar>
            <ion-label class="text-white">
              <h2 class="h2">{{ message.displayName }}</h2>
              <p class="comment-message">{{ message.message }}</p>
            </ion-label>
          </ion-item>
        </ion-list>
      </ion-list>
    
       <ion-list *ngIf="filterType === 'details'" >
        <ion-header [translucent]="true">
          <ion-toolbar>
            <ion-title>{{ current_event?.title }}</ion-title>
          </ion-toolbar>
        </ion-header>
        
        <!-- <ion-content [fullscreen]="true"> -->
          <div>
            <ion-card>
              <ion-card-header>
                <ion-card-subtitle>Date</ion-card-subtitle>
                <ion-card-title> {{ current_event?.start_date }} - {{ current_event?.end_date }} ({{ current_event?.status }}) </ion-card-title>
              </ion-card-header>
              <ion-card-content>
                <ion-card-subtitle>Location</ion-card-subtitle>
                <ion-card-title> {{ current_event?.location }} </ion-card-title>
              </ion-card-content>
            </ion-card>
        
            <!-- QR Code -->
            <ion-card>
              <ion-card-header>
                <ion-card-title>QR Code</ion-card-title>
              </ion-card-header>
                <div class="qrcode-container">
                  <qrcode [qrdata]="url" [width]="400" [errorCorrectionLevel]="'H'"></qrcode>
                </div>
            </ion-card>
        
            <!-- Event link -->
            <ion-card>
              <ion-card-header>
                <ion-card-title>Event link</ion-card-title>
              </ion-card-header>
              <ion-card-content>
                <!-- Display your event link here -->
                <p style="color: blue;">{{ this.url }}</p>
              </ion-card-content>
            </ion-card>
          </div>
        
          <h1 class="section-title">Participants</h1>
          <div class="participants-container">
            <ul class="participant-list">
              <li class="participant-card" *ngFor="let participant of participants" (click)="onCardClick(participant)">
                <ion-avatar class="participant-avatar">
                  <ion-img src="../assets/images/image1.jpg"></ion-img>
                </ion-avatar>
                <h2 class="participant-name">{{ participant?.display_name }}</h2>
              </li>
            </ul>
          </div>
      </ion-list>

      <ion-text color="danger" *ngIf="errorMessage">
        {{ errorMessage }}
      </ion-text>
    </ion-content>
 
    <ion-footer *ngIf="filterType === 'posts'">
      <ion-toolbar>
        <button (click)="openImageGallery()" class="icon-button">
          <div>
            <ion-icon class="cloud" name="cloud-upload">upload</ion-icon>
          </div>
        </button>
      </ion-toolbar>
    </ion-footer>
    