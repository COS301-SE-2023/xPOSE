<ion-header class="ion-hide-lg-down">
  <ion-toolbar>
    <ion-title slot="start">Create event</ion-title>
    <ion-buttons slot="start" class="center-items">
      <ion-button routerLink="/home" routerLinkActive="active">Home</ion-button>
      <ion-button routerLink="/joined-event" routerLinkActive="active">Joined Events</ion-button>
      <ion-button routerLink="/create-event" routerLinkActive="active">Create Event</ion-button>
      <ion-button routerLink="/notification" routerLinkActive="active">Notifications</ion-button>
      <ion-button routerLink="/friends" routerLinkActive="active">Friends</ion-button>
      <!-- <ion-button routerLink="/profile" routerLinkActive="active"> Profile</ion-button> -->
      <ion-button routerLink="/settings" routerLinkActive="active"> Settings</ion-button>
    </ion-buttons>
    <ion-buttons slot="end">
      <ion-button (click)="logout()" routerLinkActive="active"> <ion-icon name="log-out-outline"></ion-icon></ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<!-- Small screen view -->
<ion-header class="ion-hide-lg-up">
  <ion-toolbar>
    <ion-title class="ion-text-center">Create event</ion-title>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-buttons slot="end">
      <ion-button (click)="logout()" routerLinkActive="active"> <ion-icon name="log-out-outline"></ion-icon></ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
  
<ion-content [fullscreen]="true" id="main-content" class="custom-background">
  <div class="account-settings">
  <ion-row>
    <ion-col>
      <div>
        <form #form="ngForm" (ngSubmit)="CreateEvent(form)">
          <section class="privacy">
            <h3><label class="label" for="image">Title</label></h3>
            <ion-input class="ther" name="title" [(ngModel)]="createEvent.title"></ion-input>
            <h3><label class="label" for="image">Description</label></h3>
            <ion-textarea class="ther" name="description" [(ngModel)]="createEvent.description"></ion-textarea>
          </section>
          
          <section class="privacy">
            <h3><label class="label" for="privacy_setting">Privacy setting</label></h3>
            <ion-radio-group value="privacy" name="privacy_setting" [(ngModel)]="createEvent.privacy_setting">
              <ion-item>
                <ion-icon name="earth"></ion-icon>
                <ion-label>Public</ion-label>
                <ion-radio value="public"></ion-radio>
              </ion-item>
            </ion-radio-group>
            <ion-radio-group value="privacy" name="privacy_setting" [(ngModel)]="createEvent.privacy_setting">
              <ion-item>
                <ion-icon name="lock-closed"></ion-icon>
                <ion-label>Private</ion-label>
                <ion-radio value="private"></ion-radio>
              </ion-item>
            </ion-radio-group>
          </section>

          <section class="privacy">
            <h3><label class="label" for="image">Event Cover Image</label></h3>
            <div class="input-container">
              <img [src]="current_image_url" alt="Current Cover Image" *ngIf="current_image_url">
              <input type="file" accept="image/*" (change)="onFileSelected($event)" name="image" id="image">
            </div>
          </section>
          
          <section class="privacy">
            <h3><label class="label" for="location">Location</label></h3>
            <ion-searchbar class="ther" name="location" [(ngModel)]="createEvent.location" (ionInput)="onLocationInput($event)" autocomplete="off"></ion-searchbar>

            <ion-list>
              <ion-item *ngFor="let prediction of locationPredictions" (click)="onLocationSelect(prediction)">
                <ion-icon name="location"></ion-icon> {{ prediction.description }}
              </ion-item>
            </ion-list>
          </section>
      
          <section class="privacy">
            <h3><label class="label" for="">Date and time</label></h3>
            <!-- <ion-row> -->
              <!-- Start date -->
              <!-- <ion-col size="6"> -->
                <h4>Start Date</h4>
                <ion-input
                  type="datetime-local"
                  [(ngModel)]="createEvent.start_date"
                  [value]="getCurrentDate()"
                  name="start_date"
                ></ion-input>
              <!-- </ion-col> -->
  
              <!-- End date -->
              <!-- <ion-col size="6"> -->
                <h4>End Date</h4>
                <ion-input
                  type="datetime-local"
                  [(ngModel)]="createEvent.end_date"
                  [value]="getCurrentDate()"
                  name="end_date"
                ></ion-input>
              <!-- </ion-col>
            </ion-row> -->
          </section>
          
          <section class="privacy">
            <h3><label for="" class="label">Add Tags</label></h3>
            <ion-searchbar class="ther" name="tags" [(ngModel)]="tag_input" (ionInput)="onTagInput($event)" autocomplete="off"></ion-searchbar>
            <ion-list>
              <ion-item *ngFor="let tag of tags_list" (click)="onTagSelect(tag)">
                <ion-icon name="pricetag"></ion-icon> {{ tag }}
              </ion-item>
            </ion-list>
          
            <div class="tags">
              <span class="tag" *ngFor="let tag of selected_tags">
                {{ tag }}
                <button class="close" (click)="onTagRemove(tag)">x</button>
              </span>
            </div>
          </section>
          
          <style>
            .tags {
              display: flex;
              flex-wrap: wrap;
              margin-top: 10px;
            }
          
            .tag {
              display: inline-flex;
              align-items: center;
              background-color: #eee;
              border-radius: 4px;
              padding: 4px 8px;
              margin-right: 8px;
              margin-bottom: 8px;
            }
          
            .close {
              display: inline-flex;
              align-items: center;
              justify-content: center;
              background-color: #ccc;
              border-radius: 50%;
              color: #fff;
              font-size: 12px;
              width: 16px;
              height: 16px;
              margin-left: 4px;
              cursor: pointer;
            }
          </style>

          <div class="centrr">
            <ion-button id="submitBtn" type="submit" class="custom-btn">
              <ion-spinner *ngIf="loading"></ion-spinner>
              <span *ngIf="!loading">Create Event</span>
            </ion-button>
          </div>
        </form>
      </div>
    </ion-col>
  </ion-row>
  </div>
</ion-content>