<ion-header [translucent]="true">
  <ion-toolbar class="custom-toolbar">
    <ion-title>User Profile</ion-title>
    <ion-buttons slot="start">
      <app-backbutton></app-backbutton>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<div class="profile_div">
  <div class="user_div" *ngIf="user">
    <img class="profile-image" [src]="user.photoURL">
    <div class="first_div">
      <ion-label class="username">Name: {{user.displayName}}</ion-label><br>
      <ion-label class="username">Email: {{user.email}}</ion-label><br>
      <ion-label class="username">Unique Code:{{user.username}}</ion-label><br>
      <br>
    </div>
    <ion-button class="edit_div" (click)="handleFunction(user)">
      <ion-icon name="person-add-outline" *ngIf="!isFriend && !requestSent"></ion-icon>
      <ion-icon name="person-remove-outline" *ngIf="isFriend"></ion-icon>
      <ion-icon name="checkmark-done-outline" *ngIf="requestSent"></ion-icon>
      {{ isFriend ? 'Unfriend' : requestSent ? 'Request Sent' : 'Send Request' }}
    </ion-button>
    
     <!-- Use a ternary operator to conditionally set the button label -->
     <!-- <ion-button class="edit_div" (click)="handleFunction(user)">{{ isFriend? 'Unfriend': requestSent? 'Request Sent':'Request Friendship' }}</ion-button> -->
  </div>
</div>

<ion-content id="main-content">
  <ion-segment [(ngModel)]="selectedSegment">
    <ion-segment-button value="events">
      Events
    </ion-segment-button>
    <ion-segment-button value="friends">
      Friends
    </ion-segment-button>
  </ion-segment>

  <div *ngIf="selectedSegment === 'events'">
    <ion-list>
      <ion-card *ngFor="let card of cards">
        <img [src]="card.image_url">
        <ion-card-header class="card-title">
          <ion-card-title class="header">{{ card.name }}</ion-card-title>
          <ion-card-content>
            <ion-icon name="location"></ion-icon>
            {{ card.location }}
          </ion-card-content>
          <ion-row>
            <ion-col center text-center>
              <ion-card-subtitle>
                {{ card.description }}
              </ion-card-subtitle>
            </ion-col>
            <ion-col class="ion-text-end">
              <ion-button fill="clear" class="right-aligned-button">
                <ion-icon class="iconp" name='share'></ion-icon>
              </ion-button>
            </ion-col>
          </ion-row>
        </ion-card-header>
      </ion-card>
    </ion-list>
  </div>

  <div *ngIf="selectedSegment === 'friends'">
    <ion-content>
      <!-- Add content for the Friends tab -->
    </ion-content>
  </div>
</ion-content>