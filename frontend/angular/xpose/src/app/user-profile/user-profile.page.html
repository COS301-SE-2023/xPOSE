<ion-header [translucent]="true">
  <ion-toolbar class="custom-toolbar">
    <ion-title>User Profile</ion-title>
    <ion-buttons slot="start">
      <app-backbutton></app-backbutton>
    </ion-buttons>
  </ion-toolbar>
</ion-header>



<ion-content id="main-content">
  
  <div class="profile_div">
    <div class="user_div" *ngIf="user">
      <img class="profile-image" [src]="user.photoURL">
      <div class="first_div">
        <ion-label class="username">Name: {{user.displayName}}</ion-label><br>
        <ion-label class="username">Email: {{user.email}}</ion-label><br>
        <ion-label class="username">Unique Code:{{user.username}}</ion-label><br>
        <ion-label class="username">Account:{{user.visibility}}</ion-label><br>
        <br>
      </div>
      <ion-button class="edit_div" (click)="handleFunction(user)">
        <ion-icon name="person-add-outline" *ngIf="!isFriend && !requestSent"></ion-icon>
        <ion-icon name="person-remove-outline" *ngIf="isFriend"></ion-icon>
        <ion-icon name="checkmark-done-outline" *ngIf="requestSent"></ion-icon>
        {{ isFriend ? 'Unfriend' : requestSent ? 'Request Sent' : 'Send Request' }}
      </ion-button>
    </div>
  </div>
  <div class="Drop_downcontent">
    <div class="user_div" *ngIf="user">
      <!-- ... (your existing code) ... -->
      
      <div class="dropdown">
        <button class="rop_down" (click)="toggleDropdown()">Dropdown</button>
        <div class="dropdown-content" *ngIf="isDropdownOpen">
          <a (click)="setSelectedOption('events')">Event</a>
          <a (click)="setSelectedOption('friends')">Friends</a>
          <a (click)="setSelectedOption('Photos')">Photos</a>
        </div>
      </div>
      
      <!-- Conditional rendering for Event content -->
      
      <div *ngIf="selectedOption === 'events'">
        <div *ngIf="isPublic || isFriend; else content_for_private">
          <div *ngIf="cards && cards.length > 0 ">
            <ion-list>
              <ion-card *ngFor="let card of cards" class="event-card">
                <div (click)="eventDetails(card.id)" class="card-content">
                  <img [src]="card.image_url" class="card-image">
                  <ion-card-header class="card-title">
                    <ion-card-title class="header">{{ card.title }}</ion-card-title>
                    <ion-card-content class="location">
                      <ion-icon name="location"></ion-icon>
                      {{ card.location }}
                    </ion-card-content>
                  </ion-card-header>
                  <ion-row>
                    <ion-col center text-center>
                      <ion-card-subtitle class="description">
                        {{ card.description }}
                      </ion-card-subtitle>
                    </ion-col>
                  </ion-row>
                </div>
              </ion-card>
            </ion-list>
          </div>
        
          <div *ngIf="!cards || cards.length === 0" class="no-events">
            <ion-row class="ion-justify-content-center">
              <p>No Events to display.</p>
            </ion-row>
          </div>
        </div>
        
        <ng-template #content_for_private>
          <ion-row class="ion-justify-content-center private-account">
            <p>Cannot show events of private account</p>
          </ion-row>
        </ng-template>
        </div>
    </div>
  </div>

  <div *ngIf="selectedOption === 'friends'">
    <div *ngIf="(isPublic || isFriend);else content_for_private">
          <ion-list *ngIf="userFriends && userFriends.length > 0">
            <ion-item *ngFor="let friend of userFriends">
              <div (click)="forceRedirect(friend.uid, uid_viewing_user)">
                <ion-thumbnail slot="start">
                  <img [src]="friend.photoURL">
                </ion-thumbnail>
                <ion-label>
                  <h2>{{ friend.displayName }}</h2>
                    <p>{{ friend.uniq_username }}</p>
                </ion-label>
              </div>       
            </ion-item>
          </ion-list>
          <div *ngIf="!userFriends || userFriends.length === 0">
            <ion-row class="ion-justify-content-center">
              <p>No friends to display.</p>
            </ion-row>
          </div>
    </div>
    <ng-template #content_for_private>
      <ion-row class="ion-justify-content-center">
          <p>Cannot show friends of private account</p>
      </ion-row>
      </ng-template>
  </div>
  


  <!-- <ion-segment [(ngModel)]="selectedSegment">
    <ion-segment-button value="events">
      Events
    </ion-segment-button>
    <ion-segment-button value="friends">
      Friends
    </ion-segment-button>
  </ion-segment> -->

  <!-- <div *ngIf="selectedSegment === 'events'">
        <div *ngIf="isPublic || isFriend;else content_for_private">
            <div *ngIf="cards && cards.length > 0 ">
              <ion-list>
                <ion-card *ngFor="let card of cards">
                  <div (click)="eventDetails(card.id)">
                    <img [src]="card.image_url">
                    <ion-card-header class="card-title">
                      <ion-card-title class="header">{{ card.title }}</ion-card-title>
                      <ion-card-content>
                        <ion-icon name="location"></ion-icon>
                        {{ card.location }}
                      </ion-card-content>
                      <ion-row>
                        <ion-col center text-center>
                          <ion-card-subtitle>
                            {{ card.description }}
                          </ion-card-subtitle>
                        </ion-col>
                      </ion-row>
                    </ion-card-header>
                  </div>
                </ion-card> 
              </ion-list>
            </div>

            <div *ngIf="!cards || cards.length === 0">
              <ion-row class="ion-justify-content-center">
                <p>No Events to display.</p>
              </ion-row>
            </div>
    
        </div>
      
      <ng-template #content_for_private>
        <ion-row class="ion-justify-content-center">
            <p>Cannot show events of private account</p>
        </ion-row>
        </ng-template>
  </div>

  <div *ngIf="selectedSegment === 'friends'">
    <div *ngIf="(isPublic || isFriend);else content_for_private">
          <ion-list *ngIf="userFriends && userFriends.length > 0">
            <ion-item *ngFor="let friend of userFriends">
              <div (click)="forceRedirect(friend.uid, uid_viewing_user)">
                <ion-thumbnail slot="start">
                  <img [src]="friend.photoURL">
                </ion-thumbnail>
                <ion-label>
                  <h2>{{ friend.displayName }}</h2>
                    <p>{{ friend.uniq_username }}</p>
                </ion-label>
              </div>       
            </ion-item>
          </ion-list>
          <div *ngIf="!userFriends || userFriends.length === 0">
            <ion-row class="ion-justify-content-center">
              <p>No friends to display.</p>
            </ion-row>
          </div>
    </div>
    <ng-template #content_for_private>
      <ion-row class="ion-justify-content-center">
          <p>Cannot show friends of private account</p>
      </ion-row>
      </ng-template>
  </div> -->
</ion-content>