<div>
  hello, <br>
  world! <br>
  i'm alive!
</div>

<ion-content [scrollY]="true" [fullscreen]="true" class="custom-background">
  <div class="event-settings">
    <section class="form-section">
      <h3>Event Details</h3>
      <!-- <form #form="ngForm" (ngSubmit)="updateEvent()">       -->
      <!-- Change Title -->
      <div class="form-group">
        <label for="eventTitle">Change Title:</label>
        <input [(ngModel)]="eventObject.title" type="text" id="eventTitle">
      </div>

      <!-- Change Description -->
      <div class="form-group">
        <label for="eventDescription">Change Description:</label>
        <textarea id="eventDescription" [(ngModel)]="eventObject.description"></textarea>
      </div>

      <!-- Change Cover Image -->
      <div class="form-group">
        <label for="coverImage">Change Cover Image:</label>
        <img [src]="current_image_url" alt="Current Cover Image" *ngIf="current_image_url">
        <input type="file" id="coverImage" (change)="onFileSelected($event)">
      </div>      

      <div class="form-group">
        <!-- Change Location -->
        <label for="location">Location:</label>
        <ion-searchbar class="ther" name="location" [(ngModel)]="eventObject.location" (ionInput)="onLocationInput($event)" autocomplete="off"></ion-searchbar>

        <ion-list>
          <ion-item *ngFor="let prediction of locationPredictions" (click)="onLocationSelect(prediction)">
            <ion-icon name="location"></ion-icon> {{ prediction.description }}
          </ion-item>
      </ion-list>
      </div>

    <!-- Change Dates from Calendar -->
    <div class="form-group">
      <label for="startDate">Start Date:</label>
      <ion-input [(ngModel)]="eventObject.start_date" type="datetime-local" id="startDate"></ion-input>
    </div>

    <div class="form-group">
      <label for="endDate">End Date:</label>
      <ion-input [(ngModel)]="eventObject.end_date" type="datetime-local" id="endDate"></ion-input>
    </div>

      <!-- Access Privacy (Public/Private) -->
      <div class="form-group">
        <label>Access Privacy:</label>
        <ion-radio-group id="accessPrivacy" [(ngModel)]="eventObject.privacy_setting">
          <ion-item>
            <ion-label>Public</ion-label>
            <ion-radio value="public"></ion-radio>
          </ion-item>
          <ion-item>
            <ion-label>Private</ion-label>
            <ion-radio value="private"></ion-radio>
          </ion-item>
        </ion-radio-group>
      </div>

      <!-- Event Tags -->
      <div class="form-group">
        <h3><label for="" class="label">Add Tags</label></h3>
        <ion-searchbar id="tag_search" class="ther" name="tags"
        [(ngModel)]="tag_input"
        (ionInput)="onTagInput($event)"
        autocomplete="off"></ion-searchbar>
        <ion-button (click)="onTagSelect(tag_input)">
          <ion-icon name="add"></ion-icon>
        </ion-button>
        <ion-list>
          <ion-item *ngFor="let tag of tags_list" (click)="onTagSelect(tag)">
            <ion-icon name="pricetag"></ion-icon> {{ tag }}
          </ion-item>
        </ion-list>
      
        <div class="tags">
          <span class="tag" *ngFor="let tag of selected_tags">
            {{ tag }}
            <button class="close" (click)="onTagRemove(tag)">x</button>
          </span>
        </div>
      </div>

      <!-- Save Changes Button -->
      <div class="form-group">
        <button type="submit" (click)="updateEvent()">Save Changes</button>
      </div>
      <!-- </form> -->
    </section>

    <section class="form-section">
      <h3>Participants</h3>
      <div class="form-group">
        <h4><label for="" class="label">Add new users</label></h4>
        <ion-searchbar id="tag_search" class="ther" name="tags"
        [(ngModel)]="user_input"
        (ionInput)="onUserInput($event)"
        autocomplete="off"></ion-searchbar>

        <ion-list>
          <ion-item *ngFor="let user of users_list" (click)="onUserSelect(user)">
            <!-- <ion-icon name="person"></ion-icon> {{ user }} -->
            <ion-avatar slot="start">
              <ion-img [src]="user.photoURL"  loading="lazy" (click)="onCardClick(user)"></ion-img>
            </ion-avatar>
            <ion-label>
              <b class="user-name" (click)="onCardClick(user)">{{ user.display_name }}</b>
              <p class="user-email">{{ user.email }}</p>
            </ion-label>
            
            <ion-button slot="end" fill="clear" *ngIf="user.uid !== data.owner" (click)="inviteUser(user)">
              <ion-icon name="person-add"></ion-icon>
            </ion-button>
          </ion-item>
        </ion-list>      
      </div>

      <ion-item-divider class="divider"></ion-item-divider>

      <div class="form-group">
        <h4>Current Participants</h4>
        <ion-item *ngFor="let participant of participants; let i = index" >
          <ion-avatar slot="start">
            <ion-img [src]="participant.photoURL"  loading="lazy" (click)="onCardClick(participant)"></ion-img>
          </ion-avatar>
          <ion-label>
            <h2 class="participant-name" (click)="onCardClick(participant)">{{ participant.display_name }}</h2>
            <p class="participant-email">{{ participant.email }}</p>
          </ion-label>
          
          <ion-button slot="end" fill="clear" *ngIf="participant.uid !== data.owner" (click)="removeParticipant(participant)">
            <ion-icon name="person-remove"></ion-icon>
          </ion-button>
        </ion-item>
      </div>
    </section>

    <section class="form-section">
      <h3>Posts Settings</h3>
      <!-- Posts Settings -->
      <!-- <form (ngSubmit)="onSubmit()" #form="ngForm"> -->
        <div class="form-group">
          <h4>Image processing</h4>
          <ion-checkbox id="facialRecognition">Facial Recognition</ion-checkbox>
          <ion-checkbox id="deepFaceProtection">Deep Face Protection</ion-checkbox>
          <ion-checkbox id="encryption">Encryption</ion-checkbox>
        </div>
        <!-- Save Changes Button -->
        <div class="form-group">
          <button>Save Changes</button>
        </div>
      <!-- </form> -->
    </section>

    <section class="form-section">
      <!-- Chats Settings -->
      <h3>Chats Settings</h3>
      
      <!-- <form (ngSubmit)="onSubmit()" #form="ngForm"> -->
        <div class="form-group">
          <h4>Who can send messages?</h4>
          <ion-radio-group id="chatSettings">
            <ion-item>
              <ion-label>Only Admin</ion-label>
              <ion-radio value="admin"></ion-radio>
            </ion-item>
            <ion-item>
              <ion-label>Everyone</ion-label>
              <ion-radio value="everyone"></ion-radio>
            </ion-item>
          </ion-radio-group>
        </div>
        <!-- Chat Restrictions -->
        <div class="form-group">
          <!-- <h4>Chat Restrictions</h4>
          <ion-checkbox id="profanity">Allow Profanity</ion-checkbox>
          <ion-checkbox id="negativeMessages">Allow Negative Messages</ion-checkbox> -->

          <h3><label for="" class="label"> Add restricted words </label></h3>
          <ion-input id="tag_search" class="ion-input-" name="tags"
          [(ngModel)]="word_input"
          autocomplete="off" placeholder="Type restricted word"></ion-input>
          <ion-button (click)="addRestricted(word_input)">
            <ion-icon name="add"></ion-icon>
          </ion-button>
          <!-- <ion-list>
            <ion-item *ngFor="let word of restrictedWords_list" (click)="onTagSelect(word)">
              <ion-icon name="pricetag"></ion-icon> {{ word }}
            </ion-item>
          </ion-list>
         -->
          <div class="tags">
            <span class="tag" *ngFor="let word of restrictedWords_list">
              {{ word }}
              <button class="close" (click)="onWordRemove(word)">x</button>
            </span>
          </div>

        </div>
    
        <!-- Save Changes Button -->
        <div class="form-group">
          <!-- <button id="saveChangesButton" (click)="updateEvent()">Save Changes</button> -->
        </div>
      <!-- </form> -->
    </section>

    <section class="form-section">
      <h3>Delete Event</h3>
      <!-- Posts Settings -->
      <!-- <form (ngSubmit)="onSubmit()" #form="ngForm"> -->
        <div class="form-group">
          <h4>This will delete the event and all of its posts and chats</h4>
          <!-- <ion-checkbox id="facialRecognition">Facial Recognition</ion-checkbox>
          <ion-checkbox id="deepFaceProtection">Deep Face Protection</ion-checkbox>
          <ion-checkbox id="encryption">Encryption</ion-checkbox> -->
        </div>
        <!-- Save Changes Button -->
        <div class="form-group">
          <button (click)="deleteEvent()">Delete Event</button>
        </div>
      <!-- </form> -->
    </section>
  </div>
</ion-content>
